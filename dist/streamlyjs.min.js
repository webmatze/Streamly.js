/*! streamlyjs.js - v0.1.1 - by Mathias Karstädt 2015-03-15 */!function(a,b){"use strict";"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Streamly=b():a.Streamly=b()}(this,function(){"use strict";var a=window.jQuery,b={toString:function(){return"Streamly.js by Mathias Karstädt"}};return b.EventStream=function(a){this.isActivated=!1,this.value=a||null,this.listeners=[],this.activation_listeners=[]},b.EventStream.prototype.emit=function(a){this.value=a,this.notifyListeners()},b.EventStream.prototype.notifyListeners=function(){var a=this.value;this.listeners.forEach(function(b){b(a)})},b.EventStream.prototype.onValue=function(a){return this.listeners.push(a),this.activate(),this},b.EventStream.prototype.onActivation=function(a){return this.activation_listeners.push(a),this},b.EventStream.prototype.activate=function(){var a=this;this.isActivated||(this.activation_listeners.forEach(function(b){b(a)}),this.isActivated=!0)},b.EventStream.prototype.plug=function(a){var b=this;return a.onValue(function(a){b.emit(a)}),this},b.EventStream.prototype.filter=function(a){var c=this,d=new b.EventStream;return d.onActivation(function(){c.onValue(function(b){a(b)&&d.emit(b)})}),d},b.EventStream.prototype.map=function(a){var c=this,d=new b.EventStream;return d.onActivation(function(){c.onValue(function(b){d.emit(a(b))})}),d},b.EventStream.prototype.flatMap=function(a){var c=this,d=new b.EventStream;return d.onActivation(function(b){c.onValue(function(c){a(c).onValue(function(a){b.emit(a)})})}),d},b.EventStream.prototype.merge=function(a){var c=this,d=new b.EventStream;return d.onActivation(function(){c.onValue(d.emit.bind(d)),a.onValue(d.emit.bind(d))}),d},b.EventStream.prototype.startWith=function(a){return this.value=a,this.onActivation(function(b){b.emit(a)}),this},b.EventStream.prototype.combine=function(a,c){var d=this,e=new b.EventStream;return e.onActivation(function(b){d.onValue(function(d){b.emit(c(a.value,d))}),a.onValue(function(a){b.emit(c(d.value,a))})}),e},b.EventStream.prototype.scan=function(a,c){var d=this,e=new b.EventStream(a);return e.onActivation(function(){d.onValue(function(a){e.emit(c(e.value,a))})}),e},b.asEventStream=function(a,c){var d=new b.EventStream;return d.onActivation(function(b){a.on(c,b.emit.bind(b))}),d},a&&(b.$={},b.$.asEventStream=function(a){return b.asEventStream(this,a)},a.fn.asEventStream=b.$.asEventStream),b.fromPromise=function(a){var c=new b.EventStream,d=function(a){c.emit(a)},e=function(a){c.emit(a)};return c.onActivation(function(){a.then(d,e)}),c},b.timed=function(a,b){var c=function(){b(),clearTimeout(d)},d=setTimeout(c,a)},b.once=function(a){var c=new b.EventStream;return c.onActivation(function(b){b.emit(a)}),c},b.later=function(a,c){var d=new b.EventStream;return d.onActivation(function(d){b.timed(a,function(){d.emit(c)})}),d},b.combineWith=function(a,c,d){var e=new b.EventStream;return e.onActivation(function(b){c.onValue(function(c){b.emit(a(c,d.value))}),d.onValue(function(d){b.emit(a(c.value,d))})}),e},b});