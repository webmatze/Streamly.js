/*! streamlyjs.js - v0.0.0 - by Mathias Karstädt 2015-03-05 */!function(a,b){"use strict";"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Streamly=b():a.Streamly=b()}(this,function(){"use strict";var a=window.jQuery,b={toString:function(){return"Streamly.js by Mathias Karstädt"}};return b.EventStream=function(a){this.isProperty=!1,this.isActivated=!1,this.value=a||null,this.listeners=[],this.activation_listeners=[]},b.EventStream.prototype.emit=function(a){this.value=a,this.notifyListeners()},b.EventStream.prototype.notifyListeners=function(){var a=this.value;this.listeners.forEach(function(b){b(a)})},b.EventStream.prototype.onValue=function(a){return this.listeners.push(a),this.activate(),this.isProperty&&a(this.value),this},b.EventStream.prototype.onActivation=function(a){return this.activation_listeners.push(a),this},b.EventStream.prototype.activate=function(){var a=this;this.isActivated||(this.activation_listeners.forEach(function(b){b(a)}),this.isActivated=!0)},b.EventStream.prototype.filter=function(a){var c=this,d=new b.EventStream;return d.isProperty=this.isProperty,d.onActivation(function(){c.onValue(function(b){a(b)&&d.emit(b)})}),d},b.EventStream.prototype.map=function(a){var c=this,d=new b.EventStream;return d.isProperty=this.isProperty,d.onActivation(function(){c.onValue(function(b){d.emit(a(b))})}),d},b.EventStream.prototype.merge=function(a){var c=this,d=new b.EventStream;return d.isProperty=this.isProperty||a.isProperty,d.onActivation(function(){c.onValue(d.emit.bind(d)),a.onValue(d.emit.bind(d))}),d},b.EventStream.prototype.toProperty=function(a){var c=this,d=new b.EventStream(a);return d.isProperty=!0,d.onActivation(function(){c.onValue(d.emit.bind(d))}),d.emit(a),d},b.EventStream.prototype.combine=function(a,c){var d=this,e=new b.EventStream;return e.isProperty=this.isProperty||a.isProperty,this.onValue(function(b){e.emit(c(a.value,b))}),a.onValue(function(a){e.emit(c(d.value,a))}),e},b.EventStream.prototype.scan=function(a,c){var d=this,e=new b.EventStream(a);return e.isProperty=this.isProperty,e.onActivation(function(){d.onValue(function(a){e.emit(c(e.value,a))})}),e},b.asEventStream=function(a,c){var d=new b.EventStream;return d.onActivation(function(b){a.on(c,b.emit.bind(b))}),d},a&&(b.$={},b.$.asEventStream=function(a){return b.asEventStream(this,a)},a.fn.asEventStream=b.$.asEventStream),b.timed=function(a,b){var c=function(){b(),clearTimeout(d)},d=setTimeout(c,a)},b.once=function(a){var c=new b.EventStream;return c.onActivation(function(b){b.emit(a)}),c},b.later=function(a,c){var d=new b.EventStream;return d.onActivation(function(d){b.timed(a,function(){d.emit(c)})}),d},b});